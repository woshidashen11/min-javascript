<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		
		<script src="Cookie.js" ></script>
		<script>
			
			onload = function() {
				var oList = document.getElementById("list");
				//console.log(oList);
				var aLi = oList.getElementsByTagName("li");
				
				//遍历li
				for (var i=0; i<aLi.length; i++) {
					
					var oA = aLi[i].getElementsByTagName("a")[0]; //a节点
					//添加点击事件
					//oA.index = i;
					oA.onclick = function() {
						//console.log(this.index);
						//aLi[this.index]
						
						//this.parentNode是点击的"加入购物车"的父节点li
						var aSpan = this.parentNode.getElementsByTagName("span");
						var name = aSpan[0].innerHTML; //商品名称
						var price = aSpan[1].innerHTML; //商品价格
						
						//保存到cookie
						var d = new Date();
						d.setDate(d.getDate() + 7); //7天后的日期
						var cookieText = setCookie(name, price, d); //加入购物车(保存到cookie中)
						console.log(cookieText);
						//商品2=$46; 商品3=$47; 商品5=$49
						
						//json字符串
						//[{name:商品1,price:47,unit:$,num:1}, {name:商品1,price:47,unit:$,num:1}]
					}
				}
				
			}
			  
		</script>
	</head>
	<body>
		<ul id="list">
			<li><span>商品1</span> <span>$45</span> <a href="#">加入购物车</a></li>
			<li><span>商品2</span> <span>$46</span> <a href="#">加入购物车</a></li>
			<li><span>商品3</span> <span>$47</span> <a href="#">加入购物车</a></li>
			<li><span>商品4</span> <span>$48</span> <a href="#">加入购物车</a></li>
			<li><span>商品5</span> <span>$49</span> <a href="#">加入购物车</a></li>
			<li><span>商品6</span> <span>$50</span> <a href="#">加入购物车</a></li>
		</ul>
		<a href="5_cart.html">进入我的购物车</a>
	</body>
</html>
